{% extends "base.html" %}
{% load static %}
{% block titulo %}
Formulario de Publicación de Noticias - Caos News
{% endblock titulo %}
{% block css %}
<link rel="stylesheet" href="{% static 'css/escribir.css' %}">
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="{% static 'js/jquery.validate.min.js' %}"></script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
{% endblock css%}
{% block script %}
<!-- Tiny MC -->
<script src="https://cdn.tiny.cloud/1/8l8m0j6ztkpaf38bwic7ipvi8ioyez7mb801f53jk8ik7ygw/tinymce/6/tinymce.min.js"
    referrerpolicy="origin"></script>
<script>
    function agregarNoticia(id) {
        Swal.fire({
            title: '¿Está seguro de continuar?',
            text: "Luego de enviar el artículo, no podrá editarlo.",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Estoy seguro'
        })
    }
</script>
{% endblock script %}


{% block contenido %}
{% load crispy_forms_tags %}
<!-- Contenido -->
<div class="container border border-bottom-0">
    <div class="top p-4">
        <h1 class="text-center titulo-web shadow">Escritura de Artículo</h1>
    </div>
    <form action="{% url 'escr' %}" name="formulario" id="formulario" method="post" enctype="multipart/form-data"
        class="needs-validation" novalidate>
        {% csrf_token %}
        <div class="row justify-content-end" style="margin-bottom: 40px;">
            <div class="form-group">
                <div class="mb-1">
                    {{ form.titulo | as_crispy_field }}
                </div>
                <div class="mb-3 my-4">
                    {{ form.portada | as_crispy_field}}
                </div>
                <div class="row">
                    <div class="col-lg-6 col-md-12">
                        {{ form.categoria | as_crispy_field}}
                    </div>
                    <div class="col-lg-6 col-md-12">
                        {{ form.ubicacion | as_crispy_field}}
                    </div>
                </div>
                <div class="my-4">
                    {{ form.contenido | as_crispy_field}}
                </div>
                <div class="mb-3 pt-2">
                    {{ form.etiquetas | as_crispy_field}}

                </div>
            </div>
        </div>
        <div class="row justify-content-end">
            <div class="col-sm-6 col-md-5 col-lg-1 pb-3">
                <button  id="submit" class="btn btn-danger">Subir</button>
            </div>
        </div>
    </form>

</div>

{% if messages %}
{% for m in messages %}
<script>
    Swal.fire({
            title: '¿Está seguro de continuar?',
            text: "Luego de enviar el artículo, no podrá editarlo.",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Estoy seguro'
        }).then(function(result){
            if(result.isConfirmed){
                window.location.href = "{% url 'escr' %}";
            }
        })
</script>
{% endfor %}
{% endif %}
{% endblock contenido %}

{% block script_final %}
<!-- Optional Javascript -->
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
    integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
    crossorigin="anonymous"></script>
<script src="{% static 'js/escribir.js' %}"></script>
{% endblock script_final %}