{% extends "base.html" %}
{% load socialaccount %}
{% providers_media_js %}
{%load static %}
{% block titulo %}
Registrarse - Caos News
{% endblock titulo %}
{%block css %}
<link rel="stylesheet" href="{% static 'css/signup.css' %}">
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
{% endblock css%}
{% block contenido %}
{% comment %} Validar Formulario {% endcomment %}
<script>
    function validarFormulario() {
        let pass1 = document.getElementById("txtPassword").value;
        let pass2 = document.getElementById("txtPassword2").value;
        if (pass1 != pass2) {
            Swal.fire({
                title: '¡Error!',
                text: 'Las contraseñas no coinciden',
                icon: 'error',
                confirmButtonText: 'Aceptar'
            })
            return false;
        }
        let email = document.getElementById("txtEmail").value;
        if (email.trim().length == 0) {
            Swal.fire({
                title: '¡Error!',
                text: 'Ingrese un email válido',
                icon: 'error',
                confirmButtonText: 'Aceptar'
            })
            return false;
        }
        else {
            Swal.fire(
                '¡Bien hecho!',
                '{{msg}}',
                'success'
            )
            return true;
        }
        return true;
    }

</script>
<!-- Formulario -->
<div class="container-fluid ps-md-0">
    <div class="row g-0">
        <div class="d-none d-md-flex col-md-4 col-lg-6 bg-image"></div>
        <div class="col-md-8 col-lg-6">
            <div class="login d-flex align-items-center py-5">
                <div class="container">
                    <div class="row">
                        <div class="col-md-9 col-lg-8 mx-auto">
                            <h3 class="login-heading mb-4">Registro</h3>
                            <!-- Sign Up-->
                            <form action="{% url 'sp' %}" method="post" class="needs-validation" novalidate
                                onsubmit="return validarFormulario()">
                                {% csrf_token %}
                                <div class="row">
                                    <div class="col">
                                        <div class="form-floating mb-3">
                                            <input type="text" class="form-control" id="txtName" name="txtName"
                                                placeholder="Nombre" ; required autofocus>
                                            <label for="nombre">Nombre</label>
                                            <div class="invalid-feedback">
                                                Rellene este campo.
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div class="form-floating mb-3">
                                            <input type="text" class="form-control" id="txtApellido" name="txtApellido"
                                                placeholder="Apellido" ; required autofocus>
                                            <label for="apellido">Apellido Paterno</label>
                                            <div class="invalid-feedback">
                                                Rellene este campo.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="txtUsername" name="txtUsername"
                                        placeholder="username" ; required autofocus>
                                    <label for="username">Usuario</label>
                                    <div class="valid-feedback">
                                        ¡Nombre de usuario disponible!
                                    </div>
                                    <div class="invalid-feedback">
                                        Rellene este campo.
                                    </div>
                                </div>

                                <div class="form-floating mb-3">
                                    <input type="email" class="form-control" id="txtEmail" name="txtEmail"
                                        placeholder="name@example.com" required autofocus>
                                    <label for="email">Email</label>
                                    <div class="valid-feedback">
                                        Email válido
                                    </div>
                                    <div class="invalid-feedback">
                                        Email inválido.
                                    </div>
                                </div>

                                <hr>

                                <div class="form-floating mb-3">
                                    <input type="password" class="form-control" id="txtPassword" name="txtPassword"
                                        placeholder="Password" required autofocus>
                                    <label for="password">Contraseña</label>
                                    <div class="valid-feedback">
                                        Contraseña Válida
                                    </div>
                                    <div class="invalid-feedback">
                                        Por favor ingrese una contraseña
                                    </div>
                                </div>

                                <div class="form-floating mb-3">
                                    <input type="password" class="form-control" id="txtPassword2"
                                        placeholder="Confirm Password" required autofocus>
                                    <label for="floatingPasswordConfirm">Confirma Contraseña</label>
                                    <div class="valid-feedback">
                                        Contraseña Válida
                                    </div>
                                    <div class="invalid-feedback">
                                        Las contraseñas no coinciden.
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="form-check" style="margin-bottom: 15px;">
                                        <input class="form-check-input" type="checkbox" value="" id="invalidCheck2"
                                            required>
                                        <label class="form-check-label" for="invalidCheck2">
                                            Acepto las <a href="{% url 'terms' %}">Condiciones del servicio y
                                                Política
                                                de privacidad</a> de Caos News
                                        </label>
                                    </div>
                                    <div class="d-grid mb-2">
                                        <button class="btn btn-lg btn-danger btn-login fw-bold text-uppercase"
                                            type="submit">Registrarse</button>
                                    </div>

                                    <p class="d-block text-center mt-2 small">¿Tienes una cuenta? <a
                                            href="{% url 'log' %}">Inicia
                                            Sesión</a></p>

                                    <hr class="my-4">

                                    <div class="d-grid mb-2">
                                        <button
                                            class="btn btn-lg btn-google btn-login fw-bold text-uppercase text-decoration-none"
                                            type="submit">
                                            <i class="icon-google me-2"></i><a
                                                href="{% provider_login_url 'google' method = 'oauth2' %}"
                                                class="">Entrar Con Google</a>
                                        </button>
                                    </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
{% endblock contenido %}